app.controller('HomeCtrl', ['$scope', '$http', '$routeParams', 'uiGmapGoogleMapApi', '$timeout', function($scope, $http, $routeParams, uiGmapGoogleMapApi, $timeout){

  $scope.outPanel = false;
  $scope.showPanel = function(){
    $scope.outPanel = !$scope.outPanel;
  }

  $scope.search = true;
  $scope.trail = false;
  $scope.switchPanel = function(){
    $scope.search = !$scope.search;
    $scope.trail = !$scope.trail;
  }


  // // uiGmapGoogleMapApi.then(function(maps){

  // var directionsService = new google.maps.DirectionsService();

  // var request = 
  // {
  //   // origin: $scope.trip.pickupLocation,
  //   // destination: $scope.trip.dropOfflocation,
  //   // DRIVING, BICYCLING, TRANSIT, WALKING
  //   // travelMode: google.maps.DirectionsTravelMode.WALKING 
  // };

  // var mapOptions = {
  //   zoom: 12,
  //   center: { 
  //     latitude: 22.268394, 
  //     longitude: 114.186700
  //   },
  //   //ROADMAP, SATELLITE, HYBRID, TERRAIN
  //   mapTypeId: google.maps.MapTypeId.ROAMAP 
  // };

  var map;
  $scope.map = {
    center: { 
      latitude: 22.268394, //happy valley
      longitude: 114.186700 
    },
    zoom: 12,
    bounds: {
      latitude: 22.1634178, 
      longitude: 113.5629425
    }
  };
  
  $scope.options = {
    // allow zoom in zoom out by scrolling
    scrollwheel: true
  };

  // initial markers set, see html models = 'trails'
  $scope.trails = [{ 
      title: "Dragon's Back",
      latitude: 22.241165, 
      longitude: 114.241569,
      id: 1,
      show: false,
      description: ""
  },{
      title: "Victoria Peak",
      latitude: 22.275590,
      longitude: 114.143910,
      id: 2,
      show: false,
      description: ""
  }];

  // the push must wait til the map is ready in order to show up
  // $scope.trails.push(trail);
  $scope.addMarker = function(){
    var newtrail = { 
        title: "Happy Valley",
        latitude: 22.268394, 
        longitude: 114.186700,
        description: "",
        show: false,
        id: 3,
    };
    $scope.trails.push(newtrail);
  }


// onclick the window shows up, with title and description
  $scope.trails.onMouseOver = function() {
      trails.show = !trails.show;
  };

  // $scope.clickEventsObject = {
  //     mouseover: trailsInfoMouseOver,
  //     mouseout: trailsInfoMouseOut,
  // };


  // slider for durations (mins)
  $scope.sliderConfig = {
      // value:100,
      min: 0,
      max: 500,
      step: 50
  }
  $scope.duration = 0;
  $scope.setDuration = function (duration){
    $scope.duration = duration; 
  }

  // slider for difficulties (0-5)
  $scope.sliderDifficultConfig = {
      min: 0,
      max: 5,
      step: 1
  };

  $scope.difficulty = 0;
  $scope.setDifficulty = function (difficulty){
    $scope.difficulty = difficulty; 
  }

  // slider for scenary (0-5)
  $scope.sliderScenaryConfig = {
      min: 0,
      max: 5,
      step: 1
  }
  $scope.scenary = 0;
  $scope.setScenary = function (scenary){
    $scope.scenary = scenary; 
  }

  // map.getDirections().directions().then( function( directions ) { 
  //   console.log(directions); 
  // });


  // slider for durations (mins)
  $scope.sliderConfig = {
      // value:100,
      min: 0,
      max: 500,
      step: 50
  }
  $scope.duration = 0;
  $scope.setDuration = function (duration){
    $scope.duration = duration; 
  }

  // slider for difficulties (0-5)
  $scope.sliderDifficultConfig = {
      min: 0,
      max: 5,
      step: 1
  }
  $scope.difficulty = 0;
  $scope.setDifficulty = function (difficulty){
    $scope.difficulty = difficulty; 
  }

  // slider for scenary (0-5)
  $scope.sliderScenaryConfig = {
      min: 0,
      max: 5,
      step: 1
  }
  $scope.scenary = 0;
  $scope.setScenary = function (scenary){
    $scope.scenary = scenary; 
  }



  // polyline test...
  $scope.polylines = [
      {
          id: 3,
          path: google.maps.geometry.encoding.decodePath("sz{fCmlixTN_@f@gAJQvB{Cz@eAj@g@BAEOGi@@[QKKMCSBg@Re@JM`@SZONOhAe@~@QPELKlAcARK`@G`@?zDCH@PJHJHBXIr@Sr@Kv@G^BbA\|@\f@LRLb@l@vAhCx@bB`@f@ZJVApBa@dB_@TBRLDT]~A?P@FNJLu@BDHLFL@NRTNH^FPCt@Ch@F^Pf@^NHb@F`CVh@CPHXRT`@LTDTDLVT|@h@BVDn@v@fCDd@rA@r@In@QlA@h@IP@RHr@RXLP?j@OZUl@o@tBq@TARDP@JCHGBKDKJCDEBIHEVFd@Gd@EbEnAN?LARDd@L`@BHALBh@[D@X^Pv@@p@JHMTc@DUNEVq@ZFV]JIXH^Ph@XZNbAA`@L`@d@n@V^JRFTTx@ND~@Dv@@n@Bl@Cl@Wj@]DETGh@Q@E?EGK"),
          stroke: {
              color: '#4EAE47',
              weight: 3
          },
          editable: false,
          draggable: false,
          geodesic: false,
          visible: true,
          icons: [{
              icon: {
                  path: google.maps.SymbolPath.BACKWARD
              },
              offset: '25px',
              repeat: '50px'
          }]
      }
  ];

    // polyline test ^^
    $scope.eee = function () {
      console.log($scope.polylines[0].path)
    }

}]);

